<c-row ngPreserveWhitespaces class="mar-top-20">
  <c-col xs="12">
    <c-card class="mb-4">
      <c-card-header>
        <div class="row">
          <div class="col-md-8">
            <h3 class="mb-0">{{ "TEMPERATURE" | translate }}</h3>
          </div>
        </div>
      </c-card-header>
      <c-card-body>
        <div class="card-body" style="line-height: 3px;">
          <div class="row">
            <div class="col-md-3">
              <div class="input-group">
                 <input type="text" id="stationNo" name="stationNo" class="form-control"
                   [placeholder]="translate.instant('SEARCH')" [(ngModel)]="textSearch" />
              </div>
            </div>
            <div class="col-md-3">
              <div class="input-group">
                <select name="factor" id="factor" class="form-select" [(ngModel)]="factor">
                  <option value="T2m">T2m</option>
                  <option value="T2mMax">T2mMax</option>
                  <option value="T2Min">T2mMin</option>
                </select>
              </div>
            </div>
            <div class="col-md-3">
              <div class="input-group">
                <input type="date" id="dtdate" name="dtdate" class="form-control" [(ngModel)]="dtDate" />
              </div>
            </div>
            <div class="col-md-3">
              <button type="button" class="btn btn-primary white" (click)="getData()">
                <svg [cIcon]="icon.cilSearch" size="lg" title="List Icon"></svg> {{'SEARCH' | translate}}
              </button>
              <button type="button" class="btn btn-info white" (click)="reload()">
                <svg [cIcon]="icon.cilSync" size="lg" title="List Icon"></svg> {{'RELOAD' | translate}}
              </button>
            </div>
          </div>

          <div class="clear-fix"></div>

          <div class="row mt-3">
            <div class="col-md-8 mar-bot-10">
              <div class="btn-group dropdown" dropdown [dropup]="false" style="margin-right: 3px;">
                <button dropdownToggle type="button" class="btn btn-info white dropdown-toggle" style="color: white;">
                 {{ "ARRANGE_LIST" | translate }}
                </button>
                <ul *dropdownMenu class="dropdown-menu dropdown" style="padding: 0;min-width: 98px; text-align: center;">
                  <ng-container *ngFor="let item of arrangeOptions">
                    <ng-container *ngIf="item.key === arrangeName">
                      <li style="height: 30px; display: flex; align-items: center;">
                        <a style="font-weight: 500; line-height: 24px;" class="dropdown-item" (click)="changeArrangeName(item)">{{ item.value }}</a>
                      </li>
                    </ng-container>
                    <ng-container *ngIf="item.key !== arrangeName">
                      <li style="height: 30px; display: flex; align-items: center;">
                        <a style="font-weight: 500; line-height: 24px;" class="dropdown-item" (click)="changeArrangeName(item)">{{ item.value }}</a>
                      </li>
                    </ng-container>
                  </ng-container>
                </ul>
              </div>
              <button type="button" style="margin-left: 1px;" class="btn btn-info white mar-left-10" data-toggle="modal"
                (click)="createOrUpdateDialog(false)">
                <svg [cIcon]="icon.cilPlus" size="lg" title="List Icon"></svg>
                {{'ADD_NEW' | translate}}
              </button>
              <button type="button" style="margin-left: 1px;"
                class="btn btn-danger white btnAccess ng-scope mar-left-10" id="xoa" (click)="openDelete(false)"
                [disabled]="arrayDelete.length <= 0">
                <i class="fa fa-trash"></i>
                {{'DELETE' | translate}}
              </button>
            </div>
            <div class="col-md-4">
            </div>
            <div class="clear-fix"></div>
            <br />

            <div class="row mar-top-10">
              <div class="col-md-12 col-lg-12">
                <perfect-scrollbar [config]="scrollXConfig">
                  <table class="table table-striped table-hover table-bordered table-border">
                    <thead class="table-info">
                      <tr style="border-width: 0;">
                        <th class="text-center">
                          <input type="checkbox" name="all" [(ngModel)]="isCheckAll" (change)="checkAll()" />
                        </th>

                        <!-- headers động -->
                        <th *ngFor="let head of header">{{ head | translate }}</th>

                        <!-- cột thao tác -->
                        <th>{{ 'MANIPULATION' | translate }}</th>
                      </tr>
                    </thead>

                     <tbody>
                        <tr *ngFor="let item of datasource; let i = index">
                          <td class="text-center">
                            <input
                              type="checkbox"
                              name="sizecb[]"
                              [(ngModel)]="item.isChecked"
                              (change)="checkElement(item)"
                            />
                          </td>

                          <td *ngFor="let pro of property">
                            <ng-container *ngIf="pro === 'DtDate'; else checkStatus">
                              {{ item[pro] | date: 'HH:mm' }}
                            </ng-container>

                            <ng-template #checkStatus>
                              <ng-container *ngIf="pro === 'Status'; else normalCell">
                                  <ng-container [ngSwitch]="item.QCFlag">
                                    <span *ngSwitchCase="0">✅</span>
                                    <span *ngSwitchCase="1">⚠️</span>
                                    <span *ngSwitchCase="2">❌</span>
                                    <span *ngSwitchCase="9">⛔</span>
                                    <span *ngSwitchDefault>❔</span>
                                  </ng-container>
                              </ng-container>

                              <ng-template #normalCell>
                                {{ item[pro] }}
                              </ng-template>
                            </ng-template>
                          </td>
                          <td>
                            <button
                              [title]="translate.instant('UPDATE')"
                              type="button"
                              class="btn-sm btn btn-info white"
                              (click)="createOrUpdateDialog(true, item)"
                            >
                              <i class="fa fa-edit"></i>
                            </button>
                            <button
                              [title]="translate.instant('DELETE')"
                              type="button"
                              class="btn-sm btn btn-danger white mar-left-10"
                              (click)="openDelete(true, item)"
                            >
                              <i class="fa fa-trash"></i>
                            </button>
                          </td>
                        </tr>

                    </tbody>
                  </table>

                  <app-not-found *ngIf="totalItems <= 0"></app-not-found>
                </perfect-scrollbar>
              </div>

              <div class="col-md-12">
                <div class="footer footer-border">
                  <div class="col-md-6">
                    <div class="float-left font-weight-bold text-dark mar-bot-15">
                      {{'RECORD_NUMBER' | translate}}: {{ totalItems }}
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="float-right float-right-paging" *ngIf="totalItems > 0">
                      <div class="btn-group dropup pull-left mr-3 btn-group-dropup" dropdown [dropup]="true">
                        <button dropdownToggle type="button" class="btn btn-info white dropdown-toggle">
                          {{ pageSize }} {{'RECORD_PAGE' | translate}}
                        </button>
                        <ul *dropdownMenu class="dropdown-menu dropup" style="line-height: 10px;">
                          <ng-container *ngFor="let item of pageSizeOptions">
                            <li>
                              <a class="dropdown-item" [class.active]="item === pageSize" (click)="changePageSize(item)">
                                {{ item }}
                              </a>
                            </li>
                          </ng-container>
                        </ul>
                      </div>

                      <pagination
                        [(ngModel)]="pageNumber"
                        [totalItems]="totalItems"
                        [itemsPerPage]="pageSize"
                        [maxSize]="maxSizeDisplay"
                        [boundaryLinks]="true"
                        align="right"
                        (pageChanged)="changePage($event)"
                        style="line-height: 24px;"
                        class="pagination float-right"
                        previousText="&lsaquo;"
                        nextText="&rsaquo;"
                        firstText="&laquo;"
                        lastText="&raquo;">
                      </pagination>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>


<app-view-modal #delete [widthDialog]="'modal-md'" (saveOpenDialog)="confirmDelete()"
  [submitButton]="translate.instant('OK')" (closeDialog)="closeDialog()" (keyup.esc)="closeDialog()">
  <div class="row">
    <div class="card-body text-break">
      <h6 *ngIf="deleteSingle === true">
        {{'CONFRIM_DELETE' | translate}} {{ itemDelete.CountryCode }} - {{ itemDelete.CountryName }}?
      </h6>
      <ng-container *ngIf="deleteSingle === false">
        <h6> {{'CONFRIM_DELETE_ITEM' | translate}} :</h6>
        <ul>
          <li *ngFor="let item of arrayDelete">
            {{ item.CountryCode }} - {{ item.CountryName }}
          </li>
        </ul>
      </ng-container>
    </div>
  </div>
</app-view-modal>

<div class="clear-fix"></div>

<app-view-modal #create (saveOpenDialog)="submitForm()">
  <div class="row">
    <div class="col-md-12">
      <div class="card-body">
        <form class="form-horizontal" [formGroup]="formGroup">
          <div class="mar-top-20">
            <label class="col-form-label mar-right-5 mar-bot-20">
              {{ 'DECRIPTION_NOTE_REQUIRE' | translate }}
            </label>
            <label style="color: red">(*)</label>.
          </div>
        </form>
      </div>
    </div>
  </div>
</app-view-modal>
